drop database finalproject;
create database finalproject;
use finalproject;

CREATE TABLE user (
	user_name VARCHAR(255) NOT NULL UNIQUE,
	nick_name VARCHAR(255) NOT NULL UNIQUE,
	rating BIGINT NOT NULL,
	PRIMARY KEY (user_name));

CREATE TABLE bankaccount ( 
	bank_name VARCHAR(255) NOT NULL, 
	user_name VARCHAR(255) NOT NULL, 
	country VARCHAR(255) NOT NULL, 
	account_number BIGINT, 
	owner_name VARCHAR(255) NOT NULL, 
	address VARCHAR(255) NOT NULL, 
	currency VARCHAR(255), 
	sending_or_receiving VARCHAR(255),
	account_balance DECIMAL(9,4) NOT NULL DEFAULT 10000.0000,
	PRIMARY KEY (account_number));

CREATE TABLE offers (
	id BIGINT NOT NULL AUTO_INCREMENT,
	user_name VARCHAR(255) NOT NULL, 
	source_country VARCHAR(255) NOT NULL, 
	source_currency VARCHAR(255) NOT NULL,
	remit_amount DECIMAL(9,4) NOT NULL,
	destination_country VARCHAR(255) NOT NULL, 
	destination_currency VARCHAR(255) NOT NULL, 
	exchange_rate DECIMAL(6,2) NOT NULL,
	expiration_date DATE NOT NULL,
	counter_offers BOOLEAN NOT NULL DEFAULT 1,
	split_exchange BOOLEAN NOT NULL DEFAULT 1, 
	new_remit_amount DECIMAL(9,4),
	offer_status VARCHAR(255) NOT NULL,
	PRIMARY KEY (id));


CREATE TABLE transaction (
	id BIGINT auto_increment, 
	timestamp datetime DEFAULT CURRENT_TIMESTAMP, 
	user_name VARCHAR(255) NOT NULL, 
	source_country VARCHAR(255) NOT NULL,
 	source_currancy VARCHAR(255) NOT NULL, 
 	remit_amount DECIMAL(9,4) NOT NULL,
 	offer_accepter VARCHAR(255),
 	destination_country VARCHAR(255) NOT NULL, 
 	destination_currancy VARCHAR(255) NOT NULL,
 	exchange_rate DECIMAL(6,2) NOT NULL,
 	expiration_date DATE NOT NULL, 
 	counter_offers BOOLEAN NOT NULL DEFAULT 1, 
 	new_remit_amount DECIMAL(9,4), 
 	split_exchange BOOLEAN NOT NULL DEFAULT 1, 
 	split_exchange_partie1 VARCHAR(255),
 	split_exchange_partie2 VARCHAR(255),
 	split_exchange_partie3 VARCHAR(255), 
 	offer_status VARCHAR(255),
 	service_fee DECIMAL(6,2) ,
 	PRIMARY KEY (id));


